## Task 생성 모달 - 카테고리 선택 및 추가 유저플로우

---

### 유저플로우 1: 기존 카테고리 선택

#### 1. 입력 (Input)
* 사용자가 Task 생성을 위해 `TaskCreationModal`을 열고, view가 `select` 상태로 진입합니다.
* 사용자가 설정 패널에 표시된 카테고리 목록 중 하나를 클릭(선택)합니다.

#### 2. 처리 (Processing)
* **데이터 조회:** 시스템은 모달이 활성화될 때, 서버로부터 현재 사용자가 생성한 모든 카테고리 객체 목록(이름, 색상 등 포함)을 가져옵니다.
* **엣지케이스 처리 (API 호출 실패):** 데이터 조회에 실패할 경우(네트워크 오류 등), 시스템은 에러 상태를 인지합니다.
* **엣지케이스 처리 (카테고리 없음):** 조회된 카테고리 목록이 비어있을 경우를 처리합니다.
* **상태 업데이트:** 사용자가 특정 카테고리를 선택하면, 시스템은 해당 카테고리의 고유 ID를 내부 상태(State)에 저장하여 현재 생성 중인 Task가 어떤 카테고리에 속할지를 지정합니다.

#### 3. 출력 (Output)
* **시각적 피드백:** 사용자가 선택한 카테고리 항목이 시각적으로 선택되었음을 명확히 표시합니다(예: 배경색 변경, 체크 아이콘 표시 등). 이전에 선택된 카테고리가 있었다면 해당 카테고리의 선택 표시는 해제됩니다.
* **사이드 이펙트 (API 호출 실패 시):** '처리' 단계에서 데이터 조회 실패 시, 카테고리 목록 영역에 "데이터를 불러오는 데 실패했습니다."와 같은 안내 메시지를 표시하고, 사용자에게 재시도를 유도하는 UI를 제공할 수 있습니다.
* **사이드 이펙트 (카테고리 없음):** '처리' 단계에서 조회된 카테고리가 하나도 없을 경우, 목록 영역에 "생성된 카테고리가 없습니다."와 같은 안내 메시지를 표시하고, '카테고리 추가' 버튼을 시각적으로 강조하여 다음 행동을 유도합니다.

---

### 유저플로우 2: 신규 카테고리 추가

#### 1. 입력 (Input)
* 사용자가 카테고리 목록 하단 또는 상단에 위치한 '카테고리 추가' 버튼을 클릭합니다.
* (UI가 변경된 후) 사용자가 노출된 '이름 입력 필드'에 새로운 카테고리 이름을 타이핑합니다.
* 사용자가 함께 제공된 '색상 선택 UI'(예: 컬러 팔레트)에서 원하는 색상을 선택합니다.
* 사용자가 '저장' (또는 '생성', '확인') 버튼을 클릭하여 입력을 완료합니다.

#### 2. 처리 (Processing)
* **UI 상태 전환:** 시스템은 '카테고리 추가' 버튼 입력을 감지하고, 기존의 카테고리 목록을 숨기고 이름과 색상을 입력할 수 있는 UI를 표시하는 상태로 전환합니다.
* **유효성 검사 (Validation):** 사용자가 '저장' 버튼을 클릭하면, 시스템은 API 요청 전에 다음을 검증합니다.
    * 카테고리 이름이 비어있는가?
    * 입력된 이름이 기존 카테고리 이름과 중복되는가?
    * 색상이 선택되었는가?
* **API 요청:** 유효성 검사를 통과하면, 시스템은 입력된 이름과 색상 정보를 담아 서버에 신규 카테고리 생성을 요청하는 API를 호출합니다.
* **엣지케이스 처리 (유효성 검사 실패):** 검사에 실패하면 API를 호출하지 않고, 실패 원인을 내부적으로 기록합니다.
* **엣지케이스 처리 (API 호출 실패):** API 호출 과정에서 네트워크 오류 등이 발생하면 에러를 처리합니다.
* **상태 업데이트 (성공 시):** API 호출이 성공하면, 시스템은 응답으로 받은 새로운 카테고리 객체(고유 ID 포함)를 전체 카테고리 목록 상태(State)에 추가합니다.
* **자동 선택:** 시스템은 방금 생성된 카테고리를 현재 Task의 선택된 카테고리로 즉시 지정합니다.
* **UI 상태 복귀:** 시스템은 입력 UI를 다시 카테고리 목록 UI로 전환합니다.

#### 3. 출력 (Output)
* **UI 변경:** '카테고리 추가' 버튼 클릭 시, 카테고리 목록 UI가 사라지고, 이름 입력 필드와 색상 선택 UI가 포함된 생성 전용 UI가 나타납니다.
* **유효성 검사 실패 시:** 해당하는 입력 필드 주변에 "이미 사용 중인 이름입니다." 또는 "이름을 입력해주세요."와 같은 구체적인 오류 메시지를 표시합니다. UI는 그대로 유지되어 사용자가 입력을 수정할 수 있습니다.
* **API 통신 실패 시:** "카테고리 생성에 실패했습니다. 다시 시도해주세요."와 같은 토스트 팝업이나 메시지를 표시합니다.
* **최종 성공 시:**
    * 카테고리 생성 UI가 사라지고 전체 카테고리 목록 UI로 돌아옵니다.
    * 방금 추가된 새 카테고리가 목록의 일부로 표시됩니다.
    * 새로 추가된 카테고리가 자동으로 '선택된' 상태(하이라이트 등)로 표시되어, 사용자에게 별도 클릭 없이 선택이 완료되었음을 알려줍니다.
    
    
    Here's an example of how the UI might look when a new category is being added: 

