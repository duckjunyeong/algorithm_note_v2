## 1. 비활성화된 복습 카드 결과 조회 (Viewing Deactivated Review Card Results)

이 유저 플로우는 사용자가 학습을 완료하여 비활성화된(`isActive: false`) 복습 카드의 상세 내용을 확인하는 과정을 다룹니다.

### 1.1. 입력 (Input)

*   사용자가 `isActive` 상태가 `false`인 `ReviewCard` 컴포넌트 위로 마우스 커서를 올립니다(hover).
*   `ReviewCard`에 나타난 "결과 보기" 버튼을 클릭합니다.

### 1.2. 처리 (Processing)

1.  **클라이언트(프론트엔드)**는 사용자가 클릭한 `ReviewCard`의 고유 ID를 식별합니다.
2.  이 ID를 가지고 **서버(백엔드)**에 해당 카드의 모든 질문과 각 질문에 대한 모든 답변 목록을 요청하는 API를 호출합니다.
3.  **서버**는 데이터베이스에서 `ReviewCard` ID와 연결된 모든 질문을 조회합니다.
4.  조회된 각 질문 ID에 연결된 모든 답변 데이터를 조회하며, **생성일 기준 내림차순(최신순)**으로 정렬합니다.
5.  **서버**는 질문과 정렬된 답변 목록을 구조화하여 클라이언트에 응답합니다.
6.  **클라이언트**는 응답받은 데이터를 상태(state)에 저장하고, 결과 조회 전용 UI(예: 모달 창)를 활성화합니다.
7.  결과 조회 UI는 전달받은 데이터 목록에서 첫 번째 질문과 해당 질문의 첫 번째(가장 최신) 답변을 기본값으로 화면에 표시하도록 설정합니다.

**엣지 케이스 처리**

*   **API 요청 실패:** 서버로부터 데이터를 가져오는 데 실패할 경우, 시스템은 에러 상태를 설정하고 사용자에게 피드백을 줄 준비를 합니다.
*   **답변이 없는 질문:** 특정 질문에 대해 사용자가 남긴 답변이 하나도 없을 경우, 시스템은 해당 질문에 대한 '답변 없음' 상태를 인식합니다.
*   **답변이 1개인 질문:** 답변이 하나만 존재하는 질문의 경우, '이전'/'다음' 버튼은 비활성화 처리됩니다.

### 1.3. 출력 (Output)

*   "테스트하기" 버튼 대신 "결과 보기" 버튼이 표시됩니다.
*   버튼 클릭 시, 결과 조회 UI가 화면에 나타납니다.
*   UI에는 질문의 내용과 답변의 내용이 표시됩니다.
*   답변의 `evaluationResult` 값에 따라 배경색이 다르게 표시됩니다. (예: `SUCCESS`는 초록색 계열, `FAILURE`는 붉은색 계열)
*   답변 목록을 탐색할 수 있는 '이전', '다음' 버튼이 제공됩니다.
*   (권장) 비활성화된 카드에는 예상 재활성화 날짜(예: "예상 활성화: 10월 5일")를 함께 표시하여 사용자에게 명확한 정보를 제공합니다.

**엣지 케이스 출력**

*   **API 요청 실패 시:** "데이터를 불러오는 데 실패했습니다."와 같은 에러 메시지가 사용자에게 표시됩니다.
*   **답변이 없는 질문의 경우:** 답변 표시 영역에 "기록된 답변이 없습니다."와 같은 안내 문구가 출력됩니다.

---

## 2. 복습 카드 자동 재활성화 (Automatic Review Card Reactivation)

이 유저 플로우는 사용자의 직접적인 조작 없이, 시스템이 설정된 반복 주기에 따라 비활성화된 복습 카드를 자동으로 다시 학습 대상으로 전환하는 과정을 다룹니다.

### 2.1. 입력 (Input)

*   **시스템 트리거:** 백엔드 시스템에 미리 정의된 스케줄링된 작업(Scheduled Task)이 자동으로 실행됩니다.
    *   **프로덕션 환경:** 매일 자정(00:00)에 1회 실행됩니다. (Cron 표현식: `0 0 * * *`)
    *   **개발 환경:** 빠른 테스트를 위해 매 10초마다 실행될 수 있습니다. (Cron 표현식: `*/10 * * * * *`)
*   **대상 데이터:** 데이터베이스에 `isActive`가 `false`이고, 비활성화된 시점의 타임스탬프(`updatedAt`)와 `reviewCycle`(반복 주기) 값이 저장된 `ReviewCard`가 존재합니다.

### 2.2. 처리 (Processing)

1.  스케줄러가 `.env` 파일에 설정된 주기에 따라 백엔드 시스템의 '재활성화 로직'을 실행시킵니다.
2.  시스템은 데이터베이스에서 `isActive`가 `false`인 모든 `ReviewCard`를 조회합니다.
3.  조회된 각 `ReviewCard`에 대해, 현재 시각과 해당 카드가 비활성화된 시각(`updatedAt`)의 경과 시간을 계산합니다.
4.  시스템은 '경과 시간'이 해당 카드의 `reviewCycle` 값보다 크거나 같은지(`>=`) 비교합니다.
5.  조건을 만족하는 모든 `ReviewCard`의 `isActive` 상태를 `true`로 변경하는 업데이트 쿼리를 실행합니다.

**환경 변수(.env)를 이용한 동적 설정**

*   **실행 주기 설정:**
    *   백엔드 프로젝트의 `.env` 파일에 스케줄러 실행 주기를 변수로 설정합니다.

    ```dotenv
    # .env (개발 환경)
    REVALIDATION_SCHEDULE="*/10 * * * * *" # 매 10초

    # .env.production (배포 환경)
    REVALIDATION_SCHEDULE="0 0 * * *" # 매일 자정
    ```
    *   스케줄러는 이 변수 값을 읽어 실행 주기를 동적으로 결정합니다.

*   **반복 주기 최소/최대값 설정:**
    *   프론트엔드와 백엔드 프로젝트의 `.env` 파일에 각각 환경에 맞는 `reviewCycle`의 최소/최대값을 설정합니다.

    ```dotenv
    # .env (개발 환경)
    REVIEW_CYCLE_MIN=10 # 최소 10초
    REVIEW_CYCLE_MAX=60 # 최대 60초 (예시)

    # .env.production (배포 환경)
    REVIEW_CYCLE_MIN=1  # 최소 1일
    REVIEW_CYCLE_MAX=365 # 최대 365일 (예시)
    ```
    *   **프론트엔드:** UI(슬라이더 등)는 이 값을 기준으로 범위를 제한합니다.
    *   **백엔드:** 카드 생성/수정 요청 시, 이 값을 기준으로 유효성을 검증하고 저장합니다.

**엣지 케이스 처리**

*   **스케줄러 실행 오류:** 스케줄러 작업이 실패할 경우, 시스템은 에러 로그를 기록하여 개발자가 문제를 인지하고 조치할 수 있도록 합니다.
*   **시간대(Timezone) 불일치:** 모든 시간(비활성화 시각, 현재 시각)은 UTC와 같은 표준 시간대를 기준으로 계산하여 시간대 차이로 인한 오류를 방지합니다.
*   **대용량 데이터 처리:** 재활성화 대상 카드가 매우 많을 경우를 대비하여, 한 번에 모든 데이터를 업데이트하기보다 일정 단위로 나누어 처리(batch processing)하거나, 데이터베이스 쿼리에 인덱스를 적용하여 성능 저하를 방지합니다.

### 2.3. 출력 (Output)

*   **직접적인 결과:** 조건에 맞는 `ReviewCard`의 데이터베이스 `isActive` 필드 값이 `true`로 변경됩니다.
*   **사용자 경험 (Side-effect):** 사용자가 다음에 웹 애플리케이션의 대시보드에 접속하면, 재활성화된 `ReviewCard`가 '완료' 섹션에서 '백로그' (또는 '진행 중') 섹션으로 이동된 것을 시각적으로 확인할 수 있습니다. 